# 📚 DMT API - Swagger UI 사용 가이드

## 🚀 **Swagger UI 접속 방법**

### **1. 기본 접속**
- **URL**: `http://localhost:8080/swagger-ui.html`
- **API 문서**: `http://localhost:8080/api-docs`

### **2. 접속 전 확인사항**
- Spring Boot 애플리케이션이 실행 중인지 확인
- 포트 8080에서 정상 동작하는지 확인

---

## 🔐 **인증 및 테스트 순서**

### **1단계: 회원가입**
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "nickname": "테스트유저",
  "password": "password123",
  "phoneNumber": "010-1234-5678"
}
```

### **2단계: 로그인 (JWT 토큰 획득)**
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}
```

**응답에서 JWT 토큰을 복사하여 저장**

### **3단계: Swagger UI에서 인증 설정**
1. Swagger UI 우측 상단의 **"Authorize"** 버튼 클릭
2. **Value** 필드에 JWT 토큰 입력 (Bearer 접두사 제외)
3. **Authorize** 버튼 클릭
4. **Close** 버튼 클릭

---

## 📱 **API 테스트 방법**

### **인증이 필요한 API 테스트**
1. **Authorize** 버튼으로 JWT 토큰 설정
2. 원하는 API 엔드포인트 클릭
3. **Try it out** 버튼 클릭
4. 필요한 파라미터 입력
5. **Execute** 버튼 클릭

### **인증이 필요 없는 API 테스트**
- `/api/auth/register` - 회원가입
- `/api/auth/login` - 로그인
- `/api/auth/health` - 서비스 상태 확인

---

## 🏷️ **API 태그별 분류**

### **🔐 인증 관리**
- **회원가입**: 사용자 계정 생성
- **로그인**: JWT 토큰 발급
- **서비스 상태**: 인증 서비스 상태 확인

### **👥 사용자 관리**
- **사용자 등록**: 새 사용자 생성
- **사용자 조회**: ID/이메일로 사용자 정보 조회
- **사용자 수정**: 사용자 정보 업데이트
- **사용자 삭제**: 사용자 계정 삭제

### **🏠 스터디 그룹 관리**
- **그룹 생성**: 새 스터디 그룹 생성
- **그룹 조회**: 그룹 정보 및 목록 조회
- **그룹 수정**: 그룹 정보 업데이트
- **그룹 참여/탈퇴**: 멤버 관리

### **📅 스터디 세션 관리**
- **세션 생성**: 새 스터디 세션 생성
- **세션 조회**: 세션 정보 및 목록 조회
- **세션 상태 변경**: 시작/진행/완료 상태 관리
- **폰 사용 제한 상태**: 세션별 제한 상태 확인

### **✅ 출석 관리**
- **출석 기록**: 출석 상태 기록 및 조회
- **출석 통계**: 사용자별/그룹별 출석률

### **📱 폰 사용 제한 예외**
- **예외 신청**: 폰 사용 제한 예외 신청
- **예외 승인/거절**: 리더의 예외 처리
- **제한 상태 확인**: 현재 제한 상태 모니터링

---

## 🧪 **테스트 시나리오**

### **기본 플로우 테스트**
1. **회원가입** → 사용자 ID 확인
2. **로그인** → JWT 토큰 획득
3. **스터디 그룹 생성** → 그룹 ID 확인
4. **스터디 세션 생성** → 세션 ID 확인
5. **출석 기록 생성** → 출석 관리 테스트
6. **폰 사용 제한 예외 신청** → 핵심 기능 테스트

### **에러 케이스 테스트**
- **중복 이메일/닉네임**: 회원가입 시도
- **잘못된 비밀번호**: 로그인 시도
- **권한 없는 작업**: 리더가 아닌 사용자의 그룹 수정 시도
- **잘못된 데이터**: 유효하지 않은 요청 데이터

---

## 🔧 **Swagger UI 설정 옵션**

### **문서 정렬**
- **Tags**: 알파벳 순으로 정렬
- **Operations**: 알파벳 순으로 정렬
- **Doc Expansion**: 기본적으로 접힌 상태

### **서버 환경**
- **로컬 개발**: `http://localhost:8080`
- **운영 환경**: `https://api.dmt.com`

---

## 📝 **주의사항**

### **JWT 토큰 관리**
- 토큰은 24시간 후 만료
- 만료된 토큰으로 API 호출 시 401 에러
- 새로운 토큰 발급을 위해 재로그인 필요

### **데이터베이스**
- H2 인메모리 데이터베이스 사용
- 애플리케이션 재시작 시 데이터 초기화
- H2 콘솔: `http://localhost:8080/h2-console`

### **API 권한**
- 대부분의 API는 인증 필요
- 그룹 리더만 특정 작업 수행 가능
- 권한 없는 작업 시 403 에러

---

## 🚨 **문제 해결**

### **Swagger UI 접속 불가**
- 애플리케이션 실행 상태 확인
- 포트 8080 사용 중인지 확인
- 방화벽 설정 확인

### **API 호출 실패**
- JWT 토큰 유효성 확인
- 요청 데이터 형식 확인
- 서버 로그 확인

### **권한 오류**
- 사용자 역할 확인
- 그룹 멤버십 확인
- JWT 토큰의 권한 정보 확인

---

## 📚 **추가 리소스**

- **프로젝트 문서**: `DESIGN.md`
- **curl 명령어**: `curl-commands.md`
- **Postman 컬렉션**: `DMT-API-Collection.postman_collection.json`
- **API 엔드포인트**: Swagger UI에서 확인 가능 